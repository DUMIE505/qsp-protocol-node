#!/bin/bash

####################################################################################################
#                                                                                                  #
# (c) 2019 Quantstamp, Inc. This content and its use are governed by the license terms at          #
# <https://s3.amazonaws.com/qsp-protocol-license/V2_LICENSE.txt>                                   #
#                                                                                                  #
####################################################################################################

# TODO remove this hard coded tag and rely on a env var
# injected by the node
# See https://quantstamp.atlassian.net/browse/QSP-1264

if [[ "$#" == 0 ]] ; then
    docker run qspprotocol/usolc:node-latest
    exit 0
fi

# There are some arguments that need to be processed...

MOUNT_ARGS=""

for ARG in "$@"; do
    if [[ -f  "$ARG" ]]; then
        # If the argument matches a file that exist in the filesystem,
        # save it to be mounted
        MOUNT_ARGS="${MOUNT_ARGS} -v ${ARG}:${ARG}"
    fi
done

docker run -i $MOUNT_ARGS qspprotocol/usolc:node-latest $@
